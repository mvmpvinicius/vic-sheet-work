/*
Product Name: dhtmlxWindows 
Version: 4.2.1 
Edition: Standard 
License: content of this file is covered by GPL. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx4)=="undefined"){window.dhx4={version:"4.2.1",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[this.readFromCss(a+"_skin_detect")]||null},readFromCss:function(c,g){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}var a=b[g||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(g){var j=g.getBoundingClientRect();var k=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||k.scrollTop;var h=window.pageXOffset||b.scrollLeft||k.scrollLeft;var i=b.clientTop||k.clientTop||0;var l=b.clientLeft||k.clientLeft||0;var m=j.top+a-i;var c=j.left+h-l;return{top:Math.round(m),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(g){if(this._isObj(g)){var c={};for(var b in g){if(typeof(g[b])=="object"&&g[b]!=null){c[b]=this._copyObj(g[b])}else{c[b]=g[b]}}}else{var c=[];for(var b=0;b<g.length;b++){if(typeof(g[b])=="object"&&g[b]!=null){c[b]=this._copyObj(g[b])}else{c[b]=g[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(g,i,b){g=(typeof(g)=="string"?document.getElementById(g):g);var a=g.value.length;i=Math.max(Math.min(i,a),0);b=Math.min(b,a);if(g.setSelectionRange){try{g.setSelectionRange(i,b)}catch(h){}}else{if(g.createTextRange){var c=g.createTextRange();c.moveStart("character",i);c.moveEnd("character",b-a);try{c.select()}catch(h){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0);window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0);window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0)}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var j=arguments[1];var i=window.dhx4.trim(arguments[3]);var l=null;var h=[c[j]];if(i.length>0){i=i.split(":");var g=[];for(var m=0;m<i.length;m++){if(m>0&&g[g.length-1].match(/\\$/)!=null){g[g.length-1]=g[g.length-1].replace(/\\$/,"")+":"+i[m]}else{g.push(i[m])}}l=g[0];for(var m=1;m<g.length;m++){h.push(g[m])}}if(typeof(l)=="string"&&typeof(window.dhx4.template[l])=="function"){return window.dhx4.template[l].apply(window.dhx4.template,h)}if(j.length>0&&typeof(c[j])!="undefined"){if(a==true){return window.dhx4.trim(c[j])}return String(c[j])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(g,h,c,a){var b=window.dhx4.template._parseFmt(h,c,a);if(b==false){return g}return window.dhx4.template._getFmtValue(g,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(j,c,a){var g=j.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(g==null||g.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(g[1])=="string"?g[1]:""),s_aft:(typeof(g[3])=="string"?g[3]:"")};var i=g[2].split(".");if(i[1]!=null){b.d_len=i[1].length}var h=i[0].split(",");if(h.length>1){b.i_len=h[h.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(i,g,a){if(g==null||typeof(g)=="undefnied"){g=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefnied"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(i instanceof Date){var h=function(j){return(String(j).length==1?"0"+String(j):j)};var b=function(k){switch(k){case"%d":return h(i.getDate());case"%j":return i.getDate();case"%D":return a.dayShortName[i.getDay()];case"%l":return a.dayFullName[i.getDay()];case"%m":return h(i.getMonth()+1);case"%n":return i.getMonth()+1;case"%M":return a.monthShortName[i.getMonth()];case"%F":return a.monthFullName[i.getMonth()];case"%y":return h(i.getYear()%100);case"%Y":return i.getFullYear();case"%g":return(i.getHours()+11)%12+1;case"%h":return h((i.getHours()+11)%12+1);case"%G":return i.getHours();case"%H":return h(i.getHours());case"%i":return h(i.getMinutes());case"%s":return h(i.getSeconds());case"%a":return(i.getHours()>11?"pm":"am");case"%A":return(i.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return i.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var n=i.getTimezoneOffset();var l=Math.abs(Math.floor(n/60));var j=Math.abs(n)-l*60;return(n>0?"-":"+")+h(l)+":"+h(j);default:return k}};var c=String(g||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(i))};window.dhx4.str2date=function(h,t,y){if(t==null||typeof(t)=="undefnied"){t=window.dhx4.dateFormat[window.dhx4.dateLang]}if(y==null||typeof(y)=="undefnied"){y=window.dhx4.dateStrings[window.dhx4.dateLang]}t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var x=[];var l=[];t=t.replace(/%[a-z]/gi,function(k){switch(k){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":l.push(k);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":l.push(k);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":l.push(k);return"(\\d{1,2})";case"%Y":l.push(k);return"(\\d{4})";case"%a":l.push(k);return"([am|pm])";case"%A":l.push(k);return"([AM|PM])";case"%u":l.push(k);return"(\\d{1,6})";case"%P":l.push(k);return"([+-]\\d{1,2}:\\d{1,2})"}return k});var z=new RegExp(t,"i");var m=h.match(z);if(m==null||m.length-1!=l.length){return"Invalid Date"}for(var b=1;b<m.length;b++){x.push(m[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var n={};var j={};for(var b=0;b<l.length;b++){if(typeof(c[l[b]])!="undefined"){var g=c[l[b]];if(!n[g]){n[g]=[];j[g]=[]}n[g].push(x[b]);j[g].push(l[b])}}x=[];l=[];for(var b=1;b<=7;b++){if(n[b]!=null){for(var s=0;s<n[b].length;s++){x.push(n[b][s]);l.push(j[b][s])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var o=function(r,k){for(var p=0;p<k.length;p++){if(k[p].toLowerCase()==r){return p}}return -1};for(var b=0;b<x.length;b++){switch(l[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(x[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[l[b]]](Number(x[b])+(l[b]=="%m"||l[b]=="%n"?-1:0))}break;case"%M":case"%F":var i=o(x[b].toLowerCase(),y[{"%M":"monthShortName","%F":"monthFullName"}[l[b]]]);if(i>=0){a.setMonth(i)}break;case"%y":if(!isNaN(x[b])){var u=Number(x[b]);a.setFullYear(u+(u>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(x[b])){var u=Number(x[b]);if(u<=12&&u>=0){a.setHours(u+(o("pm",x)>=0?(u==12?0:12):(u==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=x[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,g,c){if(typeof g.status=="undefined"||g.status<400){xml=(!g.responseXML)?dhx4.ajax.parse(g.responseText||g):(g.responseXML||g);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(b){}}}if(c!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],c])}return document.createElement("DIV")},xpath:function(c,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(c)||[]}catch(h){return[]}}else{var g=[];var i;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(i=b.iterateNext()){g.push(i)}return g}},query:function(a){dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){return this._call("PUT",b,a,true,c)},del:function(b,a,c){return this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}return this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(a,b,c,h,j,m,g){var l=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var i=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(h==true){l.onreadystatechange=function(){if((l.readyState==4)||(i==true&&l.readyState==3)){if(l.status!=200||l.responseText==""){if(!dhx4.callEvent("onAjaxError",[l])){return}}window.setTimeout(function(){if(typeof(j)=="function"){j.apply(window,[{xmlDoc:l,filePath:b,async:h}])}if(m!=null){if(typeof(m.postData)!="undefined"){dhx4.ajax.postLong(m.url,m.postData,j)}else{dhx4.ajax.getLong(m.url,j)}}j=null;l=null},1)}}}if(a=="GET"&&this.cache!=true){b+=(b.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"}l.open(a,b,h);if(g!=null){for(var k in g){l.setRequestHeader(k,g[k])}}else{if(a=="POST"||a=="PUT"||a=="DELETE"){l.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(a=="GET"){c=null}}}l.setRequestHeader("X-Requested-With","XMLHttpRequest");l.send(c);return{xmlDoc:l,filePath:b,async:h}}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(j,c,i,h,l){if(l=="clear"){for(var b in j._dhxdataload){j._dhxdataload[b]=null;delete j._dhxdataload[b]}j._loadData=null;j._dhxdataload=null;j.load=null;j.loadStruct=null;j=null;return}j._dhxdataload={initObj:c,xmlToJson:i,xmlRootTag:h,onBeforeXLS:null};j._loadData=function(q,r,s){if(arguments.length==2){s=r;r=null}var p=null;if(arguments.length==3){s=arguments[2]}if(typeof(q)=="string"){var o=q.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var w=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(w.test(o.replace(/^<\?xml[^\?]*\?>\s*/,""))){p=dhx4.ajax.parse(q);if(p!=null){p=this[this._dhxdataload.xmlToJson].apply(this,[p])}}if(p==null&&(o.match(/^\{.*\}$/)!=null||o.match(/^\[.*\]$/)!=null)){p=dhx4.s2j(o)}if(p==null){this.callEvent("onXLS",[]);var n=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var o=this._dhxdataload.onBeforeXLS.apply(this,[q]);if(o!=null&&typeof(o)=="object"){if(o.url!=null){q=o.url}if(o.params!=null){for(var u in o.params){n.push(u+"="+encodeURIComponent(o.params[u]))}}}}var v=this;var m=function(a){var k=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){k=v[v._dhxdataload.xmlToJson].apply(v,[a.xmlDoc.responseXML])}else{k=dhx4.s2j(a.xmlDoc.responseText)}if(k!=null){v[v._dhxdataload.initObj].apply(v,[k,q])}v.callEvent("onXLE",[]);if(s!=null){if(typeof(s)=="function"){s.apply(v,[])}else{if(typeof(window[s])=="function"){window[s].apply(v,[])}}}m=s=null;k=a=v=null};n=n.join("&")+(typeof(r)=="string"?"&"+r:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(q,n,m)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(q+(n.length>0?(q.indexOf("?")>0?"&":"?")+n:""),m)}}return}}else{if(typeof(q.documentElement)=="object"||(typeof(q.tagName)!="undefined"&&typeof(q.getElementsByTagName)!="undefined"&&q.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){p=this[this._dhxdataload.xmlToJson].apply(this,[q])}else{p=window.dhx4._copyObj(q)}}if(p!=null){this[this._dhxdataload.initObj].apply(this,[p])}if(s!=null){if(typeof(s)=="function"){s.apply(this,[])}else{if(typeof(window[s])=="function"){window[s].apply(this,[])}}s=null}};if(l!=null){var g={struct:"loadStruct",data:"load"};for(var b in l){if(l[b]==true){j[g[b]]=function(){return this._loadData.apply(this,arguments)}}}}j=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,h){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var g=window.dhx4.newId();this.dhxevs.data[c][g]=h;return g};a.detachEvent=function(i){for(var g in this.dhxevs.data){var h=0;for(var c in this.dhxevs.data[g]){if(c==i){this.dhxevs.data[g][c]=null;delete this.dhxevs.data[g][c]}else{h++}}if(h==0){this.dhxevs.data[g]=null;delete this.dhxevs.data[g]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(g,i){g=String(g).toLowerCase();if(this.dhxevs.data[g]==null){return true}var h=true;for(var c in this.dhxevs.data[g]){h=this.dhxevs.data[g][c].apply(this,i)&&h}return h};a.detachAllEvents=function(){for(var g in this.dhxevs.data){for(var c in this.dhxevs.data[g]){this.dhxevs.data[g][c]=null;delete this.dhxevs.data[g][c]}this.dhxevs.data[g]=null;delete this.dhxevs.data[g]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){var a=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||false},isValidTime:function(b){var a=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(g,c){for(var h in c){if(!g[h]){g[h]=c[h]}}return g},extend_api:function(a,g,c){var b=window[a];if(!b){return}window[a]=function(j){if(j&&typeof j=="object"&&!j.tagName){var i=b.apply(this,(g._init?g._init(j):arguments));for(var h in dhtmlx){if(g[h]){this[g[h]](dhtmlx[h])}}for(var h in j){if(g[h]){this[g[h]](j[h])}else{if(h.indexOf("on")===0){this.attachEvent(h,j[h])}}}}else{var i=b.apply(this,arguments)}if(g._patch){g._patch(this)}return i||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var h=document.createElement("Div");h.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=h.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var g=c.target}else{g=c.srcElement}dragger.checkLanding(g,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(h){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var g=0;var b=0;while(c){g+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);g+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(h){return g+"_"+b}else{this.fx=g}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,g){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(g))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||g)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var g;var h;var b,a;dhtmlxEvent(document.body,"touchstart",function(i){h=i.touches[0].target;b=i.touches[0].clientX;a=i.touches[0].clientY;g=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(h){var i=document.createEvent("HTMLEvents");i.initEvent("dblclick",true,true);h.dispatchEvent(i);g=h=null}}dhtmlxEvent(document.body,"touchmove",function(i){if(g){if(Math.abs(i.touches[0].clientX-b)>50||Math.abs(i.touches[0].clientY-a)>50){window.clearTimeout(g);g=h=false}}});dhtmlxEvent(document.body,"touchend",function(i){if(g){window.clearTimeout(g);g=h=false}});dhtmlxEvent.initTouch=function(){}}}function dhtmlXCellObject(c,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=c;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var b=document.createElement("DIV");b.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(b);b=null;this._updateIdx=function(){for(var g in this.conf.idx){this.conf.idx[g]=null;delete this.conf.idx[g]}for(var j=0;j<this.cell.childNodes.length;j++){var h=this.cell.childNodes[j].className;for(var g in this.conf.idx_data){var i=new RegExp(this.conf.idx_data[g]);if(h.match(i)!=null){this.conf.idx[g]=j}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var g in this.dataNodes){if(this.dataNodes[g]!=null&&typeof(this.dataNodes[g].setSizes)=="function"){this.dataNodes[g].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){if(this.dataType=="layout"&&typeof(window.dhtmlXLayoutCell)!="undefined"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(p,n,q,k,l,m,i,j){if(this.conf.size==null){this.conf.size={}}if(j==null){j={}}var r={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=p;this.conf.size.y=n;this.conf.size.w=Math.max(q,0);this.conf.size.h=Math.max(k,0);for(var o in r){var g=(j[o]||o);this.cell.style[g]=this.conf.size[r[o]]+"px"}this.callEvent("_onSetSize",[]);if(m!==true){this._adjustCont(l,i)}else{this._adjustAttached(l)}this._adjustProgress()};this._adjustCont=function(m,j){var l=this.cell.childNodes[this.conf.idx.cont];var i=0;for(var g in this.conf.ofs_nodes.t){var h=this.conf.ofs_nodes.t[g];i+=(h=="func"?this[g]():(h==true?this.cell.childNodes[this.conf.idx[g]].offsetHeight:0))}var n=0;for(var g in this.conf.ofs_nodes.b){var h=this.conf.ofs_nodes.b[g];n+=(h=="func"?this[g]():(h==true?this.cell.childNodes[this.conf.idx[g]].offsetHeight:0))}l.style.left="0px";l.style.top=i+"px";if(!this.conf.cells_cont){this.conf.cells_cont={};l.style.width=this.cell.offsetWidth+"px";l.style.height=Math.max(this.cell.offsetHeight-i-n,0)+"px";this.conf.cells_cont.w=parseInt(l.style.width)-l.offsetWidth;this.conf.cells_cont.h=parseInt(l.style.height)-l.offsetHeight}l.style.left="0px";l.style.top=i+"px";l.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";l.style.height=Math.max(this.conf.size.h-i-n+this.conf.cells_cont.h,0)+"px";l=null;this._adjustAttached(m);if(j=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var h=["menu","toolbar","ribbon"];for(var j=0;j<h.length;j++){if(this.conf.idx[h[j]]!=null){var k=this.cell.childNodes[this.conf.idx[h[j]]];var i="dhx_cell_"+h[j]+"_no_borders";var g="dhx_cell_"+h[j]+"_def";k.className=k.className.replace(new RegExp(this.conf.borders?i:g),this.conf.borders?g:i);k=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(i){this.views[i]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var j=this.cell.childNodes[this.conf.idx.cont];while(j.childNodes.length>0){this.views[i].cellCont.push(j.firstChild);j.removeChild(j.firstChild)}j=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(var h in this.dataNodes){for(var g in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[g][h])!="undefined"){this.views[i].ofs_nodes[g][h]=this.conf.ofs_nodes[g][h];this.conf.ofs_nodes[g][h]=null;delete this.conf.ofs_nodes[g][h]}}this.views[i].dataNodesCont[h]=this.cell.childNodes[this.conf.idx[h]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[h]]);this.views[i].dataNodes[h]=this.dataNodes[h];this.dataNodes[h]=null;delete this.dataNodes[h];this._updateIdx()}this.callEvent("_onViewSave",[i])};this._viewRestore=function(i){if(this.views[i]==null){return}this.dataObj=this.views[i].dataObj;this.dataType=this.views[i].dataType;this.conf.url_data=this.views[i].url_data;for(var j=0;j<this.views[i].cellCont.length;j++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[i].cellCont[j])}for(var h in this.views[i].dataNodes){this.dataNodes[h]=this.views[i].dataNodes[h];if(h=="menu"){this.cell.insertBefore(this.views[i].dataNodesCont[h],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(h=="toolbar"){this.cell.insertBefore(this.views[i].dataNodesCont[h],this.cell.childNodes[this.conf.idx.cont])}if(h=="sb"){this.cell.appendChild(this.views[i].dataNodesCont[h])}this._updateIdx()}for(var h in this.views[i].ofs_nodes){for(var g in this.views[i].ofs_nodes[h]){this.conf.ofs_nodes[h][g]=this.views[i].ofs_nodes[h][g]}}if(this.conf.borders!=this.views[i].borders){this[this.views[i].borders?"_showBorders":"_hideBorders"](true)}if(this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==false&&this.conf.url_data.post_data!=null){this.reloadURL()}this.callEvent("_onViewRestore",[i]);this._viewDelete(i)};this._viewDelete=function(i){if(this.views[i]==null){return}this.views[i].borders=null;for(var h in this.views[i].ofs_nodes){for(var g in this.views[i].ofs_nodes[h]){this.views[i].ofs_nodes[h][g]=null}this.views[i].ofs_nodes[h]=null}this.views[i].dataType=null;this.views[i].dataObj=null;this.views[i].url_data=null;for(var j=0;j<this.views[i].cellCont.length;j++){this.views[i].cellCont[j]=null}this.views[i].cellCont=null;for(var h in this.views[i].dataNodes){this.views[i].dataNodes[h]=null;this.views[i].dataNodesCont[h]=null}this.views[i].dataNodes=this.views[i].dataNodesCont=null;this.views[i]=null;delete this.views[i]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var b=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return b};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(g){if(g==this.conf.view){var h=this.conf.unloading;this.conf.unloading=true;if(typeof(this.detachMenu)=="function"){this.detachMenu()}if(typeof(this.detachToolbar)=="function"){this.detachToolbar()}if(typeof(this.detachRibbon)=="function"){this.detachRibbon()}this.detachStatusBar();this._detachObject(null,true);this.conf.unloading=h;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[g]==null){return}var c=this.views[g];for(var b in c.dataNodes){if(typeof(c.dataNodes[b].unload)=="function"){c.dataNodes[b].unload()}c.dataNodes[b]=null;c.dataNodesCont[b]=null}if(c.dataType=="url"){if(c.cellCont!=null&&c.cellCont[0]!="null"){this._detachURLEvents(c.cellCont[0])}}else{if(c.dataObj!=null){if(typeof(c.dataObj.unload)=="function"){c.dataObj.unload()}else{if(typeof(c.dataObj.destructor)=="function"){c.dataObj.destructor()}}c.dataObj=null}}c=null;this._viewDelete(g);if(typeof(this.conf.views_loaded[g])!="undefined"){delete this.conf.views_loaded[g]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress==true){return}this.conf.progress=true;var b=document.createElement("DIV");b.className=this.conf.idx_data.pr1;var a=document.createElement("DIV");a.className=this.conf.idx_data.pr2;if(this.conf.idx.cover!=null){this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cover])}else{this.cell.appendChild(a)}this.cell.insertBefore(b,a);b=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(this.conf.progress!=true){return}this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]);this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]);this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var b=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2];if(!this.conf.pr.ofs){a.style.width=b.offsetWidth+"px";a.style.height=b.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=b.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=b.offsetHeight-this.conf.pr.ofs.h+"px";b=a=null};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover==true){return}this.conf.cover=true;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);a=null;this._updateIdx()};dhtmlXCellObject.prototype._hideCellCover=function(){if(this.conf.cover!=true){return}this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]);this._updateIdx();this.conf.cover=false};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var b in this.views){this.unloadView(b)}this.conf=null;for(var b in this){this[b]=null}};dhtmlXCellObject.prototype.attachObject=function(g,c){if(window.dhx4.s2b(c)&&!(typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof window.dhtmlXWindowsCell))){c=false}if(typeof(g)=="string"){g=document.getElementById(g)}if(g.parentNode==this.cell.childNodes[this.conf.idx.cont]){g=null;return}if(c){g.style.display="";var a=g.offsetWidth;var b=g.offsetHeight}this._attachObject(g);this.dataType="obj";g.style.display="";g=null;if(c){this._adjustByCont(a,b)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(b,a){this._detachObject(null,b,a)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){return this.dataObj};dhtmlXCellObject.prototype.attachURL=function(b,m,c){if(c==true){c={}}var g=(typeof(c)!="undefined"&&c!=false&&c!=null);if(!this.conf.url_data){this.conf.url_data={}}this.conf.url_data.url=b;this.conf.url_data.ajax=(m==true);this.conf.url_data.post_data=(c==true?{}:(c||null));if(m==true){var l=this;if(g){var h="";for(var k in c){h+="&"+encodeURIComponent(k)+"="+encodeURIComponent(c[k])}dhx4.ajax.post(b,h,function(a){l.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(l._doOnFrameContentLoaded)=="function"){l._doOnFrameContentLoaded()}l.dataType="url-ajax";l=a=null})}else{dhx4.ajax.get(b,function(a){l.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(l._doOnFrameContentLoaded)=="function"){l._doOnFrameContentLoaded()}l.dataType="url-ajax";l=a=null})}}else{if(this.dataType=="url"){var i=this.getFrame()}else{var i=document.createElement("IFRAME");i.frameBorder=0;i.border=0;i.style.width="100%";i.style.height="100%";i.style.position="relative";this._attachObject(i);this.dataType="url";this._attachURLEvents()}if(g){var j=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(j){this._attachURLEvents()}i.src="about:blank"}else{i.src=b+(window.dhx4.ajax.cache!=true?(b.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime():"")}i=null}i=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachScheduler=function(a,j,b,g){g=g||window.scheduler;var h=false;if(b){var i=document.getElementById(b);if(i){h=true}}if(!h){var c=b||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var i=document.createElement("DIV");i.id="dhxSchedObj_"+new Date().getTime();i.style.width="100%";i.style.height="100%";i.style.position="relative";i.style.overflow="hidden";i.className="dhx_cal_container";i.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+c+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(i);this.dataType="scheduler";this.dataObj=g;this.dataObj.setSizes=function(){this.update_view()};g.init(i.id,a,j);i=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");b.id="GMapsObj_"+this._genStr(12);b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(b,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(k,g,j,a,i){if(typeof(i)!="undefined"){k=i}else{var b=g||{};var l=(typeof(b.text)=="string"&&b.text.length>0?b.text:"&nbsp;");var c=(typeof(b.height)=="number"?b.height:false);var k=document.createElement("DIV");k.className="dhx_cell_statusbar_def";k.innerHTML="<div class='"+(b.paging==true?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+l+"</div>";if(c!=false){k.firstChild.style.height=k.firstChild.style.lineHeight=c+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(k,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(k)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return k};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(a!=null&&window.dhx4.s2b(a.paging)==true){a.height=null}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(b){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)!="undefined"&&(this instanceof dhtmlXWindowsCell)){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(b,a){if(!this.dataNodes[b]){return}this.cell.childNodes[this.conf.idx[b]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._genStr=function(){if(!this._genStrId){this._genStrId=new Date().getTime()}return this._genStrId++};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var c=this;var b=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(g){c.callEvent("_onContentMouseDown",[b,g||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",c._doOnFrameMouseDown,false)}}catch(g){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(g){}}}else{a.onreadystatechange=function(g){if(this.readyState=="complete"){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",c._doOnFrameMouseDown)}}catch(h){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(h){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var i=this.getFrame().contentWindow.document;var h=i.createElement("FORM");h.method="POST";h.action=this.conf.url_data.url;i.body.appendChild(h);var c={};if(window.dhx4.ajax.cache!=true){c["dhxr"+new Date().getTime()]="1"}for(var b in this.conf.url_data.post_data){c[b]=this.conf.url_data.post_data[b]}for(var b in c){var g=i.createElement("INPUT");g.type="hidden";g.name=b;g.value=c[b];h.appendChild(g);g=null}this.conf.url_data.post_ifr=false;h.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}a=null};dhtmlXCellObject.prototype._attachObject=function(h,b,g,a,c){if(typeof(h)=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[h]==1){return this["_createNode_"+h].apply(this,arguments)}if(a!=true){this._detachObject(null,true,null)}if(typeof(g)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=g}else{this.cell.childNodes[this.conf.idx.cont].appendChild(h)}h=null};dhtmlXCellObject.prototype._detachObject=function(h,b,a){this.callEvent("_onBeforeContentDetach",[]);if(h=="menu"||h=="toolbar"||h=="ribbon"||h=="sb"){var g=this.cell.childNodes[this.conf.idx[h]];g.parentNode.removeChild(g);g=null;this.conf.ofs_nodes[h=="sb"?"b":"t"][h]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(b==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var g=this.cell.childNodes[this.conf.idx.cont];while(g.childNodes.length>0){if(a===false){g.removeChild(g.lastChild)}else{g.firstChild.style.display="none";a.appendChild(g.firstChild)}}if(this.conf.append_mode){g.style.overflow="";this.conf.append_mode=false}var c=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=g=null;if(this.conf.unloading!=true&&c){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(b){this.detachObject(true);var g="layout";if(typeof(window.dhtmlXWindowsCell)!="undefined"&&this instanceof window.dhtmlXWindowsCell){g="window"}if(typeof(window.dhtmlXWindowsCell)!="undefined"&&b instanceof window.dhtmlXWindowsCell&&b.wins.w[b._idd].conf.parked){b.wins._winCellSetOpacity(b._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)!="undefined"&&b instanceof window.dhtmlXAccordionCell&&b.conf.opened==false){b._cellSetOpacity("open",false)}for(var c in b.dataNodes){this._attachObject(c,null,null,null,b.cell.childNodes[b.conf.idx[c]]);this.dataNodes[c]=b.dataNodes[c];b.dataNodes[c]=null;b.conf.ofs_nodes[c=="sb"?"b":"t"][c]=false;b._updateIdx()}this._mtbUpdBorder();if(b.dataType!=null&&b.dataObj!=null){this.dataType=b.dataType;this.dataObj=b.dataObj;while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}b.dataType=null;b.dataObj=null;if(this.dataType=="grid"){if(g=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}}this.conf.view=b.conf.view;b.conf.view="def";for(var c in b.views){this.views[c]=b.views[c];b.views[c]=null;delete b.views[c]}b._updateIdx();b._adjustCont();this._updateIdx();this._adjustCont();if(b.conf.progress==true){b.progressOff();this.progressOn()}else{this.progressOff()}if(g=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXCellTop(g,b){if(arguments.length==0||typeof(g)=="undefined"){return}var a=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=false;this.conf.fs_mode=false;this.conf.fs_tm=null;this.conf.fs_resize=false;if(g==document.body){this.conf.fs_mode=true;this.base=g;if(this.base==document.body){var c={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8}};this.conf.ofs=(c[this.conf.skin]!=null?c[this.conf.skin]:c.dhx_skyblue)}}else{this.base=(typeof(g)=="string"?document.getElementById(g):g)}this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(b!=null){this.setOffsets(b,false)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs,false);this.base._ofs=null;try{delete this.base._ofs}catch(h){}}}this._adjustCont=function(){var k=this.conf.ofs.t;for(var j in this.conf.ofs_nodes.t){k+=(this.conf.ofs_nodes.t[j]==true?this.dataNodes[j].offsetHeight:0)}var i=this.conf.ofs.b;for(var j in this.conf.ofs_nodes.b){i+=(this.conf.ofs_nodes.b[j]==true?this.dataNodes[j].offsetHeight:0)}this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=k+"px";this.cont.style.height=this.base.offsetHeight-k-i+"px"};this._setBaseSkin=function(i){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+i)};this._initFSResize=function(){if(this.conf.fs_resize==true){return}this._doOnResizeStart=function(){window.clearTimeout(a.conf.fs_tm);a.conf.fs_tm=window.setTimeout(a._doOnResizeEnd,200)};this._doOnResizeEnd=function(){a.setSizes()};if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResizeStart,false)}else{window.attachEvent("onresize",this._doOnResizeStart)}this.conf.fs_resize=true};if(this.conf.fs_mode==true){this._initFSResize()}this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();if(this.conf.fs_mode==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResizeStart,false)}else{window.detachEvent("onresize",this._doOnResizeStart)}}this.base.removeChild(this.cont);var i=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(i,"");this.cont=this.base=null;a=null};g=null}dhtmlXCellTop.prototype.setOffsets=function(i,h){var g=false;for(var b in i){var c=b.charAt(0);if(typeof(this.conf.ofs[c])!="undefined"&&!isNaN(i[b])){this.conf.ofs[c]=parseInt(i[b]);g=true}}if(h!==false&&typeof(this.setSizes)=="function"&&g==true){this.setSizes()}};dhtmlXCellTop.prototype.attachMenu=function(a){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.menuObj.style.display=="none"){return}this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px";this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.menuObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.conf.ofs_nodes.t.menuObj=false;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.toolbarObj.style.display=="none"){return}this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px";this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.conf.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.ribbonObj.style.display=="none"){return}this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px";this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.dataNodes.ribbon.setSizes()});this.conf.ofs_nodes.t.ribbonObj=true;var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b.setSizes()});this.setSizes();a.parnt=null;a=null;return this.dataNodes.ribbon};dhtmlXCellTop.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.conf.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachStatusBar=function(a){if(this.dataNodes.sbObj){return}if(typeof(a)=="undefined"){a={}}this.dataNodes.sbObj=document.createElement("DIV");this.dataNodes.sbObj.className="dhxcelltop_statusbar";if(this.cont.nextSibling!=null){this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling)}else{this.base.appendChild(this.dataNodes.sbObj)}this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof(a.text)=="string"&&a.text.length>0?a.text:"&nbsp;")+"</div>";if(typeof(a.height)=="number"){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"}this.dataNodes.sbObj.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(b){return false};this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.sbObj.style.display=="none"){return}this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px";this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px";this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.conf.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(b,a){if(this.dataNodes[b]==null){return}this.dataNodes[b].style.display=a;this.setSizes()};dhtmlXCellTop.prototype._mtbUnload=function(b,a){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var b=document.createElement("DIV");b.className="dhxcelltop_progress";this.base.appendChild(b);var a=document.createElement("DIV");a.className="dhxcelltop_progress_img";this.base.appendChild(a);b=a=null};dhtmlXCellTop.prototype.progressOff=function(){if(!this.conf.progress){return}var g={dhxcelltop_progress:true,dhxcelltop_progress_img:true};for(var c=0;c<this.base.childNodes.length;c++){if(typeof(this.base.childNodes[c].className)!="undefined"&&g[this.base.childNodes[c].className]==true){g[this.base.childNodes[c].className]=this.base.childNodes[c]}}for(var b in g){if(g[b]!=true){this.base.removeChild(g[b])}g[b]=null}this.conf.progress=false;g=null};dhtmlXCellTop.prototype.attachHeader=function(b,a){if(this.dataNodes.haObj!=null){return}if(typeof(b)!="object"){b=document.getElementById(b)}this.dataNodes.haObj=document.createElement("DIV");this.dataNodes.haObj.className="dhxcelltop_hdr";this.dataNodes.haObj.style.height=(a||b.offsetHeight)+"px";this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont);this.dataNodes.haObj.appendChild(b);b.style.visibility="visible";b=null;this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachHeader=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length>0){this.dataNodes.haObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(c,a){if(this.dataNodes.faObj!=null){return}if(typeof(c)!="object"){c=document.getElementById(c)}this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(a||c.offsetHeight)+"px";var b=(this.dataNodes.sbObj||this.cont);if(this.base.lastChild==b){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,b.nextSibling)}this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(c);c.style.visibility="visible";b=c=null;this.conf.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachFooter=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length>0){this.dataNodes.faObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.conf.unloading){this.setSizes()}};function dhtmlXWindows(k){var i=this;var g={};if(typeof(k)!="undefined"){for(var c in k){g[c]=k[c]}}k=null;this.conf={skin:window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"dhx_skyblue",vp_pos_ofs:20,vp_custom:false,ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:false,dblclick_ev:(navigator.userAgent.indexOf("MSIE 6.0")>=0||navigator.userAgent.indexOf("MSIE 7.0")>=0||navigator.userAgent.indexOf("MSIE 8.0")>=0),fr_cover:(navigator.userAgent.indexOf("MSIE 6.0")>=0)};var b=window.dhx4.transDetect();this.conf.tr={prop:b.transProp,ev:b.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"};if(!g.viewport){this.attachViewportTo(document.body)}else{if(g.viewport.object!=null){this.attachViewportTo(g.viewport.object)}else{if(g.viewport.left!=null&&g.viewport.top!=null&&g.viewport.width!=null&&g.viewport.height!=null){this.setViewport(g.viewport.left,g.viewport.top,g.viewport.width,g.viewport.height,g.viewport.parent)}else{this.attachViewportTo(document.body)}}}this.w={};this.createWindow=function(m,z,v,n,B){var l={};if(arguments.length==1&&typeof(m)=="object"){l=m}else{l.id=m;l.left=z;l.top=v;l.width=n;l.height=B;if(typeof(l.id)=="undefined"||l.id==null){l.id=window.dhx4.newId()}while(this.w[l.id]!=null){l.id=window.dhx4.newId()}}if(l.left==null){l.left=0}if(l.top==null){l.top=0}l.move=(l.move!=null&&window.dhx4.s2b(l.move)==false?false:(l.deny_move!=null&&window.dhx4.s2b(l.deny_move)==true?false:true));l.park=(l.park!=null&&window.dhx4.s2b(l.park)==false?false:(l.deny_park!=null&&window.dhx4.s2b(l.deny_park)==true?false:true));l.resize=(l.resize!=null&&window.dhx4.s2b(l.resize)==false?false:(l.deny_resize!=null&&window.dhx4.s2b(l.deny_resize)==true?false:true));l.keep_in_viewport=(l.keep_in_viewport!=null&&window.dhx4.s2b(l.keep_in_viewport));l.modal=(l.modal!=null&&window.dhx4.s2b(l.modal));l.center=(l.center!=null&&window.dhx4.s2b(l.center));l.text=(l.text!=null?l.text:(l.caption!=null?l.caption:"dhtmlxWindow"));l.header=(!(l.header!=null&&window.dhx4.s2b(l.header)==false));var C=document.createElement("DIV");C.className="dhxwin_active";this.vp.appendChild(C);C._isWindow=true;C._idd=l.id;var q=document.createElement("DIV");q.className="dhxwin_hdr";q.style.zIndex=0;q.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+l.text+"</div></div><div class='dhxwin_btns'></div>";C.appendChild(q);q.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};q.oncontextmenu=function(a){a=a||event;a.cancelBubble=true;return false};q._isWinHdr=true;q.firstChild._isWinIcon=true;var o=document.createElement("DIV");o.className="dhxwin_brd";C.appendChild(o);var u=document.createElement("DIV");u.className="dhxwin_fr_cover";u.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>";C.appendChild(u);this.w[l.id]={win:C,hdr:q,brd:o,fr_cover:u,b:{},conf:{z_id:window.dhx4.newId(),actv:false,modal:false,maxed:false,parked:false,sticked:false,visible:true,header:true,text:l.text,keep_in_vp:l.keep_in_viewport,allow_move:l.move,allow_park:l.park,allow_resize:l.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var p={help:{title:"Help",visible:false},stick:{title:"Stick",visible:false},park:{title:"Park",visible:true},minmax:{title:"Min/Max",visible:true},close:{title:"Close",visible:true}};for(var w in p){var s=new dhtmlXWindowsButton(this,l.id,w,p[w].title,false);if(p[w].visible==false){s.hide()}q.lastChild.appendChild(s.button);this.w[l.id].b[w]=s;s=null}this._winAdjustTitle(l.id);this.w[l.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[l.id].conf.z_id);var A=new dhtmlXWindowsCell(l.id,this);this.w[l.id].win.insertBefore(A.cell,u);this.w[l.id].cell=A;if(typeof(window.addEventListener)=="function"){this.w[l.id].win.addEventListener("mousedown",this._winOnMouseDown,false);this.w[l.id].win.addEventListener("mouseup",this._winOnMouseDown,false);if(this.conf.dblclick_ev){this.w[l.id].win.addEventListener("dblclick",this._winOnMouseDown,false)}if(this.conf.dnd_evs!=null){this.w[l.id].win.addEventListener(this.conf.dnd_evs.start,this._winOnMouseDown,false);if(window.navigator.msPointerEnabled!=true){this.w[l.id].win.addEventListener(this.conf.dnd_evs.start,this._winOnMouseDown,false);this.w[l.id].win.addEventListener(this.conf.dnd_evs.end,this._winOnMouseDown,false)}}}else{this.w[l.id].win.attachEvent("onmousedown",this._winOnMouseDown);this.w[l.id].win.attachEvent("onmouseup",this._winOnMouseDown);if(this.conf.dblclick_ev){this.w[l.id].win.attachEvent("ondblclick",this._winOnMouseDown)}}this._winInitFRM(l.id);this._winSetPosition(l.id,l.left,l.top);this._winSetSize(l.id,l.width,l.height);this._winMakeActive(l.id);if(l.center==true){this.w[l.id].cell.center()}if(l.modal==true){this.w[l.id].cell.setModal(true)}if(l.header==false){this.w[l.id].cell.hideHeader()}f=C=q=o=u=A=null;return this.w[l.id].cell};this._winOnMouseDown=function(m){m=m||event;var a=m.target||m.srcElement;var l={press_type:m.type};if(m.type=="MSPointerDown"){i.conf.ev_skip=true}else{if(i.conf.ev_skip==true){i.conf.ev_skip=false;a=null;return}}while(a!=null&&a._isWindow!=true){if(typeof(a.className)!="undefined"&&l.mode==null){if(typeof(a._buttonName)!="undefined"){l.mode="button";l.button_name=a._buttonName}else{if(a._isWinHdr==true){l.mode="hdr"}else{if(a._isWinIcon==true){l.mode="icon"}}}}a=a.parentNode}if(l.mode==null){l.mode="win"}l.id=(a!=null&&a._isWindow==true?a._idd:null);a=null;if(l.id!=null&&i.w[l.id]!=null){i.callEvent("_winMouseDown",[m,l])}};this._winOnParkTrans=function(l){if(l.stopPropagation){l.stopPropagation()}var a=i.w[this._idd];if(l.propertyName=="opacity"){i._winCellClearOpacity(this._idd)}if(l.propertyName=="height"&&a.conf.tr_mode=="park"){if(a.conf.tr_mode=="park"){a.win.style[i.conf.tr.prop]="";if(!a.conf.parked){i._winAdjustCell(this._idd);i._callMainEvent("onParkDown",this._idd);if(a.conf.keep_in_vp){i._winAdjustPosition(this._idd,a.conf.x,a.conf.y)}}else{a.hdr.style.zIndex=3;i._callMainEvent("onParkUp",this._idd)}}}a=null};this.unload=function(){this.conf.unloading=true;if(this._dndInitModule){this._dndUnloadModule()}for(var l in this.w){this._winClose(l)}this.w=null;if(this.cm!=null&&typeof(this._unloadContextMenu)=="function"){this._unloadContextMenu()}window.dhx4._eventable(this,"clear");this.attachViewportTo(null);for(var l in this.conf){this.conf[l]=null;delete this.conf[l]}for(var l in this){this[l]=null}i=l=null};window.dhx4._eventable(this);this.attachEvent("_winMouseDown",this._winMouseDownHandler);if(this._dndInitModule){this._dndInitModule()}if(g.wins!=null){for(var j=0;j<g.wins.length;j++){var h=g.wins[j];this.createWindow(h)}}g=null;return this}dhtmlXWindows.prototype.forEachWindow=function(c){for(var b in this.w){c.apply(window,[this.w[b].cell])}};dhtmlXWindows.prototype.window=function(a){if(this.w[a]!=null){return this.w[a].cell}return null};dhtmlXWindows.prototype.isWindow=function(a){return(this.w[a]!=null)};dhtmlXWindows.prototype.findByText=function(g){var c=[];for(var b in this.w){if((this.w[b].cell.getText()).indexOf(String(g))>=0){c.push(this.w[b])}}return c};dhtmlXWindows.prototype.setSkin=function(c){if(c==this.conf.skin){return}if(this.vp!=null){this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+c)}for(var b in this.w){this.w[b].cell._resetSizeState();this._winAdjustCell(b);this._winAdjustTitle(b)}this.conf.skin=c};dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(false)};dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(true)};dhtmlXWindows.prototype._getTopBottomWin=function(h){var g=null;for(var b in this.w){if(this.w[b].conf.visible){var c=false;if(g!=null){c=g.z>this.w[b].win.style.zIndex;if(h){c=!c}}if(g==null||c){g={win:this.w[b].cell,z:this.w[b].win.style.zIndex}}}}return(g?g.win:null)};dhtmlXWindows.prototype._winMakeActive=function(g,i){if(g!=null&&i!==true&&this.w[g].conf.actv==true){return}var s=[];var n=[{name:"modal",value:true},{name:"sticked",value:true},{name:"sticked",value:false}];var m={};for(var c=0;c<n.length;c++){var l=n[c].name;var h=n[c].value;var t=[];for(var p in this.w){var r=this.w[p];if(m[p]==null&&r.conf[l]===h&&r.conf.visible==true){if(g!=p){window.dhx4.zim.clear(r.conf.z_id);t.push([p,Number(r.win.style.zIndex)]);m[p]=true}}r=null}t.sort(function(q,k){return(q[1]<k[1]?1:-1)});if(g!=null&&this.w[g].conf[l]===h&&m[g]==null){window.dhx4.zim.clear(this.w[g].conf.z_id);var j=[[g,Number(this.w[g].win.style.zIndex)]];t=j.concat(t);m[g]=true}s=s.concat(t)}for(var c=s.length-1;c>=0;c--){var p=s[c][0];var r=this.w[p];r.win.style.zIndex=window.dhx4.zim.reserve(r.conf.z_id);if(r.conf.modal&&this.mcover!=null){for(var o in this.mcover){this.mcover[o].style.zIndex=r.win.style.zIndex}}this._winAdjustFRMZIndex(p);if(g==null&&c==0){g=p}r.conf.actv=(g==p);r.win.className=(r.conf.actv?"dhxwin_active":"dhxwin_inactive");r=null}if(g!=null&&this.conf.last_active!=g){this._callMainEvent("onFocus",g)}this.conf.last_active=g};dhtmlXWindows.prototype._vpPull={};dhtmlXWindows.prototype._vpPullAdd=function(){if(this.vp==null){return}var c=null;for(var b in this._vpPull){if(this._vpPull[b].vp==this.vp){this._vpPull[b].count++;c=b}}if(c==null){this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1}}};dhtmlXWindows.prototype._vpPullRemove=function(){if(this.vp==null){return 0}var c=0;for(var b in this._vpPull){if(this._vpPull[b].vp==this.vp){c=--this._vpPull[b].count;if(c==0){this._vpPull[b].vp=null;this._vpPull[b].count=null;delete this._vpPull[b]}}}return c};dhtmlXWindows.prototype.attachViewportTo=function(h){var c=this._vpPullRemove();if(this.conf.vp_custom){while(this.vp.childNodes.length>0){this.vp.removeChild(this.vp.lastChild)}this.vp.parentNode.removeChild(this.vp);this.vp=null}else{if(this.vp!=null&&c==0){this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),"")}}if(h==null){this.vp=null}else{this.vp=(typeof(h)=="string"?document.getElementById(h):h);var g="dhxwins_vp_"+this.conf.skin;if(this.vp.className.indexOf(g)<0){this.vp.className+=" "+g}h=null;for(var b in this.w){this.vp.appendChild(this.w[b].win)}this.conf.vp_custom=false}if(this.vp==document.body){document.body.style.position="static"}this._vpPullAdd()};dhtmlXWindows.prototype.setViewport=function(b,i,g,a,h){var c=document.createElement("DIV");c.style.position="absolute";c.style.left=b+"px";c.style.top=i+"px";c.style.width=g+"px";c.style.height=a+"px";if(typeof(h)=="undefined"||h==null){h=document.body}else{if(typeof(h)=="string"){h=document.getElementById(h)}}h.appendChild(c);this.attachViewportTo(c);this.conf.vp_custom=true;h=c=null};dhtmlXWindows.prototype._winSetPosition=function(g,a,c){var b=this.w[g];if(b.conf.maxed){b.conf.lastMX+=(a-b.conf.x);b.conf.lastMY+=(c-b.conf.y)}b.conf.x=a;b.conf.y=c;b.win.style.left=b.conf.x+"px";b.win.style.top=b.conf.y+"px";this._winAdjustFRMPosition(g);b=null};dhtmlXWindows.prototype._winAdjustPosition=function(j,b,i){var c=this.w[j];if(typeof(b)=="undefined"){b=c.conf.x}if(typeof(i)=="undefined"){i=c.conf.y}var a=(c.conf.keep_in_vp?0:-c.conf.w+this.conf.vp_pos_ofs);var h=(c.conf.keep_in_vp?this.vp.clientWidth-c.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs);if(b<a){b=a}else{if(b>h){b=h}}var g=(c.conf.keep_in_vp?this.vp.clientHeight-c.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs);if(i<0){i=0}else{if(i>g){i=g}}if(b!=c.conf.x||i!=c.conf.y){this._winSetPosition(j,b,i)}c=null};dhtmlXWindows.prototype._winSetSize=function(k,i,c,j,b){var g=this.w[k];var a=(i!=null?i:g.conf.w);var h=(c!=null?c:g.conf.h);if(this.conf.ofs_w==null){g.win.style.width=a+"px";g.win.style.height=h+"px";this.conf.ofs_w=g.win.offsetWidth-a;this.conf.ofs_h=g.win.offsetHeight-h}if(g.conf.min_w!=null&&a<g.conf.min_w){a=g.conf.min_w}if(g.conf.max_w!=null&&a>g.conf.max_w){a=g.conf.max_w}if(!g.conf.parked&&g.conf.min_h!=null&&h<g.conf.min_h){h=g.conf.min_h}if(g.conf.max_h!=null&&h>g.conf.max_h){h=g.conf.max_h}if(g.conf.keep_in_vp){if(a>this.vp.clientWidth){a=this.vp.clientWidth}if(h>this.vp.clientHeight){h=this.vp.clientHeight}}g.win.style.width=a-this.conf.ofs_w+"px";g.win.style.height=h-this.conf.ofs_h+"px";g.conf.w=a;g.conf.h=h;this._winAdjustFRMSize(k);if(b){this._winAdjustPosition(k,g.conf.x,g.conf.y)}if(!g.conf.parked&&j!=true){this._winAdjustCell(k)}g=null};dhtmlXWindows.prototype._winMinmax=function(h,c){if(typeof(c)!="undefined"&&this.w[h].conf.maxed==c){return}if(this.w[h].conf.allow_resize==false){return}var b=this.w[h];if(b.conf.parked){this._winPark(h,false)}if(b.conf.maxed){this._winSetSize(h,b.conf.lastMW,b.conf.lastMH);this._winAdjustPosition(h,b.conf.lastMX,b.conf.lastMY);b.conf.maxed=false}else{var a=0;var g=0;if(b.conf.max_w!=null){a=b.conf.x+Math.round(b.conf.w-b.conf.max_w)/2}if(b.conf.max_h!=null){g=Math.max(b.conf.y+Math.round(b.conf.h-b.conf.max_h)/2,0)}b.conf.lastMX=b.conf.x;b.conf.lastMY=b.conf.y;b.conf.lastMW=b.conf.w;b.conf.lastMH=b.conf.h;this._winSetSize(h,this.vp.clientWidth,this.vp.clientHeight);this._winAdjustPosition(h,a,g);b.conf.maxed=true}b.b.minmax.setCss(b.conf.maxed?"minmaxed":"minmax");if(b.conf.maxed){this._callMainEvent("onMaximize",h)}else{this._callMainEvent("onMinimize",h)}b=null};dhtmlXWindows.prototype._winShow=function(b,a){if(this.w[b].conf.visible==true){return}this.w[b].win.style.display="";this.w[b].conf.visible=true;if(a==true||this.conf.last_active==null){this._winMakeActive(b,true)}this._callMainEvent("onShow",b)};dhtmlXWindows.prototype._winHide=function(b,a){if(this.w[b].conf.visible==false){return}this.w[b].win.style.display="none";this.w[b].conf.visible=false;if(this.w[b].conf.actv){this.w[b].conf.actv=false;this.w[b].win.className="dhxwin_inactive";this._winMakeActive(null,true)}this._callMainEvent("onHide",b)};dhtmlXWindows.prototype._winPark=function(c,a){if(this.w[c].conf.allow_park==false){return}if(this.w[c].conf.header==false){return}var b=this.w[c];if(a==true&&this.conf.tr.prop!==false){b.win.style[this.conf.tr.prop]=this.conf.tr[b.conf.parked?"height_open":"height_close"];if(!b.conf.tr_ev){b.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,false);b.conf.tr_ev=true}}if(b.conf.parked){b.hdr.className=String(b.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,"");b.hdr.style.zIndex=0;b.conf.parked=false;b.conf.tr_mode="park";this._winCellSetOpacity(c,"open",a);this._winSetSize(c,b.conf.w,b.conf.lastPH,(a==true&&this.conf.tr.prop!==false));if(!(a==true&&this.conf.tr.prop!==false)){this._callMainEvent("onParkDown",c);if(b.conf.keep_in_vp){this._winAdjustPosition(c,b.conf.x,b.conf.y)}}if(window.dhx4.isIE8==true&&this.conf.tr.prop==false&&b.cell.cell.className.match(/dhxwin_parked/)!=null){b.cell.cell.className=b.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,"")}}else{b.conf.lastPH=b.conf.h;b.hdr.className+=" dhxwin_hdr_parked";if(a==false||this.conf.tr.prop==false){b.hdr.style.zIndex=3}b.conf.parked=true;b.conf.tr_mode="park";this._winCellSetOpacity(c,"close",a);this._winSetSize(c,b.conf.w,b.hdr.offsetHeight+this.conf.ofs_h,(a==true&&this.conf.tr.prop!==false));if(!(a==true&&this.conf.tr.prop!==false)){this._callMainEvent("onParkUp",c)}if(window.dhx4.isIE8==true&&this.conf.tr.prop==false&&b.cell.cell.className.match(/dhxwin_parked/)==null){b.cell.cell.className+=" dhxwin_parked"}}b=null};dhtmlXWindows.prototype._winCellSetOpacity=function(j,i,c,h){var b=this.w[j].cell;for(var g in b.conf.idx){if({pr1:true,pr2:true}[g]!=true){if(c==true&&this.conf.tr.prop!=false){b.cell.childNodes[b.conf.idx[g]].style[this.conf.tr.prop]=this.conf.tr["op_"+i]}b.cell.childNodes[b.conf.idx[g]].style.opacity=this.conf.tr["op_v_"+i]}}b=null};dhtmlXWindows.prototype._winCellClearOpacity=function(g){var b=this.w[g].cell;for(var c in b.conf.idx){if({pr1:true,pr2:true}[c]!=true){if(this.conf.tr.prop!=false){b.cell.childNodes[b.conf.idx[c]].style[this.conf.tr.prop]=""}}}b=null};dhtmlXWindows.prototype._winStick=function(b,a){if(typeof(a)!="undefined"&&this.w[b].conf.sticked==a){return}this.w[b].conf.sticked=!this.w[b].conf.sticked;this.w[b].b.stick.setCss(this.w[b].conf.sticked?"sticked":"stick");this._winMakeActive(this.conf.last_active,true);if(this.w[b].conf.sticked){this._callMainEvent("onStick",b)}else{this._callMainEvent("onUnStick",b)}};dhtmlXWindows.prototype._winClose=function(g){if(this._callMainEvent("onClose",g)!==true&&this.conf.unloading!=true){return}var c=this.w[g];if(c.conf.fs_mode){c.cell.setToFullScreen(false)}if(c.conf.modal){this._winSetModal(g,false)}window.dhx4.zim.clear(c.conf.z_id);if(this.cm!=null&&this.cm.icon[g]!=null){this._detachContextMenu("icon",g,null)}if(typeof(window.addEventListener)=="function"){c.win.removeEventListener("mousedown",this._winOnMouseDown,false);c.win.removeEventListener("mouseup",this._winOnMouseDown,false);if(this.conf.dblclick_ev){c.win.removeEventListener("dblclick",this._winOnMouseDown,false)}if(this.conf.dnd_evs!=null){c.win.removeEventListener(this.conf.dnd_evs.start,this._winOnMouseDown,false);if(window.navigator.msPointerEnabled!=true){c.win.removeEventListener(this.conf.dnd_evs.start,this._winOnMouseDown,false);c.win.removeEventListener(this.conf.dnd_evs.end,this._winOnMouseDown,false)}}}else{c.win.detachEvent("onmousedown",this._winOnMouseDown);c.win.detachEvent("onmouseup",this._winOnMouseDown);if(this.conf.dblclick_ev){c.win.attachEvent("ondblclick",this._winOnMouseDown)}}for(var b in c.b){this._winRemoveButton(g,b,true)}c.b=null;c.cell._unload();c.cell=null;c.brd.parentNode.removeChild(c.brd);c.brd=null;if(c.fr_cover!=null){c.fr_cover.parentNode.removeChild(c.fr_cover);c.fr_cover=null}if(c.fr_m_cover!=null){c.fr_m_cover.parentNode.removeChild(c.fr_m_cover);c.fr_m_cover=null}c.hdr._isWinHdr=true;c.hdr.firstChild._isWinIcon=true;c.hdr.onselectstart=null;c.hdr.parentNode.removeChild(c.hdr);c.hdr=null;for(var b in c.conf){c.conf[b]=null;delete c.conf[b]}c.conf=null;c.win._idd=null;c.win._isWindow=null;c.win.parentNode.removeChild(c.win);c.win=null;c=null;this.w[g]=null;delete this.w[g];if(!this.conf.unloading){this._winMakeActive(null,true)}};dhtmlXWindows.prototype._winSetModal=function(j,g,i){if(this.w[j].conf.modal==g){return}if(typeof(i)=="undefined"){i=true}var c=this.w[j];if(g==true&&c.conf.modal==false){if(this.conf.last_modal!=null){this._winSetModal(this.conf.last_modal,false,false)}if(this.mcover==null){var h=document.createElement("DIV");h.className="dhxwins_mcover";this.vp.insertBefore(h,c.fr_m_cover||c.win);this.mcover={d:h};if(this.conf.fr_cover){this.mcover.f=document.createElement("IFRAME");this.mcover.f.className="dhxwins_mcover";this.mcover.f.border=0;this.mcover.f.frameBorder=0;this.vp.insertBefore(this.mcover.f,h)}h=null}else{if(this.mcover.d.nextSibling!=(c.fr_m_cover||c.win)){this.vp.insertBefore(this.mcover.d,c.fr_m_cover||c.win);if(this.mcover.f!=null){this.vp.insertBefore(this.mcover.f,this.mcover.d)}}}c.conf.modal=true;this.conf.last_modal=j;this._winMakeActive(j,true)}else{if(g==false&&c.conf.modal==true){c.conf.modal=false;this.conf.last_modal=null;if(i&&this.mcover!=null){for(var b in this.mcover){this.vp.removeChild(this.mcover[b]);this.mcover[b]=null}this.mcover=null}}}c=null};dhtmlXWindows.prototype._winMouseDownHandler=function(c,b){var a=c.target||c.srcElement;if(c.button>=2){return}if(b.mode=="button"){if(b.press_type=="mousedown"){this.conf.button_last=b.button_name}else{if((b.press_type=="mouseup"&&b.button_name==this.conf.button_last)||b.press_type=="MSPointerDown"){this.conf.button_last=null;if(this._winButtonClick(b.id,b.button_name,c)!==true){return}}}}if((b.press_type=="mousedown"||b.press_type=="dblclick")&&b.mode=="hdr"){this.conf.dblclick_active=false;if(this.conf.dblclick_ev==true){if(b.press_type=="dblclick"){this.conf.dblclick_active=true}}else{if(this.conf.dblclick_last==null){this.conf.dblclick_last=new Date().getTime();this.dblclick_id=b.id}else{var a=new Date().getTime();if(this.conf.dblclick_last+this.conf.dblclick_tm>a&&this.dblclick_id==b.id){this.conf.dblclick_active=true;this.conf.dblclick_last=null;this.dblclick_id=null}else{this.conf.dblclick_last=a;this.dblclick_id=b.id}}}if(this.conf.dblclick_active){this._winDoHeaderDblClick(b.id);return}}if(b.press_type=="mousedown"||(this.conf.dnd_evs!=null&&b.press_type==this.conf.dnd_evs.start)){this._winMakeActive(b.id)}if(b.press_type=="touchend"){}};dhtmlXWindows.prototype._winDoHeaderDblClick=function(a){if(this.conf.dblclick_mode=="minmax"){this._winMinmax(a);return}if(this.conf.dblclick_mode=="park"){this._winPark(a,true);return}if(typeof(this.conf.dblclick_mode)=="function"){this.conf.dblclick_mode.apply(window,[a]);return}if(typeof(window[this.conf.dblclick_mode])=="function"){window[this.conf.dblclick_mode].apply(window,[a]);return}};dhtmlXWindows.prototype._winAdjustCell=function(b){var m=this.w[b];var l=1;var k=(m.conf.header?m.hdr.offsetHeight:1);var g=m.win.clientWidth-2;var n=m.win.clientHeight-k-1;m.brd.style.left=l+"px";m.brd.style.top=k+"px";if(m.conf.brd==null){m.brd.style.width=g+"px";m.brd.style.height=n+"px";m.conf.brd={w:g-m.brd.offsetWidth,h:n-m.brd.offsetHeight}}m.brd.style.width=g+m.conf.brd.w+"px";m.brd.style.height=n+m.conf.brd.h+"px";var c=5;var a=1+c;var j=(m.conf.header?k:k+c);var h=m.brd.clientWidth;var i=m.brd.clientHeight;m.cell._setSize(a,j,h,i);m.fr_cover.style.left=a+"px";m.fr_cover.style.top=j+"px";m.fr_cover.style.width=h+"px";m.fr_cover.style.height=i+"px";m=null};dhtmlXWindows.prototype._winAdjustTitle=function(g){var a=this.w[g].hdr.childNodes[0];var c=this.w[g].hdr.childNodes[1];var b=this.w[g].hdr.childNodes[2];c.style.paddingLeft=a.offsetWidth+12+"px";c.style.paddingRight=b.offsetWidth+10+"px";c=b=a=null};dhtmlXWindows.prototype._callMainEvent=function(b,g){var a=this.w[g];if(a.cell.checkEvent(b)){var c=a.cell._callMainEvent(b,[a.cell])}else{var c=this.callEvent(b,[a.cell])}a=null;return c};dhtmlXWindows.prototype._winInitFRM=function(c){if(this.conf.fr_cover!=true){return}var a=this.w[c];var b=document.createElement("IFRAME");b.className="dhxwin_main_fr_cover";b.border=0;b.frameBorder=0;b.style.zIndex=a.win.style.zIndex;a.win.parentNode.insertBefore(b,a.win);a.fr_m_cover=b;b=null};dhtmlXWindows.prototype._winAdjustFRMSize=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.width=a.conf.w+"px";a.fr_m_cover.style.height=a.conf.h+"px"}a=null};dhtmlXWindows.prototype._winAdjustFRMPosition=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.left=a.win.style.left;a.fr_m_cover.style.top=a.win.style.top}a=null};dhtmlXWindows.prototype._winAdjustFRMZIndex=function(b){var a=this.w[b];if(a.fr_m_cover!=null){a.fr_m_cover.style.zIndex=a.win.style.zIndex}a=null};function dhtmlXWindowsCell(h,g){dhtmlXCellObject.apply(this,[h,"_wins"]);this.wins=g;this.cell._winId=h;this.conf.skin=this.wins.conf.skin;this.attachEvent("_onCellUnload",function(){if(this._unloadResize){this._unloadResize()}window.dhx4._eventable(this.cell,"clear");this.cell._winId=null;this.wins=null;this.setText=null;this.getText=null;this.allowMove=null;this.denyMove=null;this.isMovable=null;this.allowResize=null;this.denyResize=null;this.isResizable=null;this.maximize=null;this.minimize=null;this.isMaximized=null;this.setPosition=null;this.getPosition=null;this.adjustPosition=null;this.park=null;this.isParked=null;this.allowPark=null;this.denyPark=null;this.isParkable=null;this.show=null;this.hide=null;this.isHidden=null;this.stick=null;this.unstick=null;this.isSticked=null;this.setDimension=null;this.getDimension=null;this.setMinDimension=null;this.getMinDimension=null;this.setMaxDimension=null;this.getMaxDimension=null;this.keepInViewport=null;this.center=null;this.centerOnScreen=null;this.bringToTop=null;this.bringToBottom=null;this.isOnTop=null;this.isOnBottom=null;this.showHeader=null;this.hideHeader=null;this.setModal=null;this.isModal=null;this.close=null;this._adjustByCont=null;this.button=null;this.addUserButton=null;this.removeUserButton=null;c=null});this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)});this.attachEvent("_onContentMouseDown",function(i,a){this.wins.callEvent("_winMouseDown",[a,{id:i,mode:"win"}])});this._callMainEvent=function(i,a){return this.callEvent(i,a)};this.conf.tr={};for(var b in this.wins.conf.tr){this.conf.tr[b]=this.wins.conf.tr[b]}if(this.conf.tr.prop!=false){}if(this._initResize){this._initResize()}window.dhx4._eventable(this.cell);var c=this;this.cell.attachEvent("_setCellSize",function(a,k){var i=c.wins.w[this._winId].conf.w-c.conf.size.w;var j=c.wins.w[this._winId].conf.h-c.conf.size.h;c.setDimension(a+i,k+j)});return this}dhtmlXWindowsCell.prototype=new dhtmlXCellObject();dhtmlXWindowsCell.prototype.setText=function(a){this.wins.w[this._idd].conf.text=a;this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=a};dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text};dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=true};dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=false};dhtmlXWindowsCell.prototype.isMovable=function(){return(this.wins.w[this._idd].conf.allow_move==true)};dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=true;this.wins.w[this._idd].b.minmax.enable()};dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=false;this.wins.w[this._idd].b.minmax.disable()};dhtmlXWindowsCell.prototype.isResizable=function(){return(this.wins.w[this._idd].conf.allow_resize==true)};dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,true)};dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,false)};dhtmlXWindowsCell.prototype.isMaximized=function(){return(this.wins.w[this._idd].conf.maxed==true)};dhtmlXWindowsCell.prototype.setPosition=function(a,b){this.wins._winSetPosition(this._idd,a,b)};dhtmlXWindowsCell.prototype.getPosition=function(){var a=this.wins.w[this._idd];var b=[a.conf.x,a.conf.y];a=null;return b};dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)};dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,true)};dhtmlXWindowsCell.prototype.isParked=function(){return(this.wins.w[this._idd].conf.parked==true)};dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=true;this.wins.w[this._idd].b.park.enable()};dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=false;this.wins.w[this._idd].b.park.disable()};dhtmlXWindowsCell.prototype.isParkable=function(){return(this.wins.w[this._idd].conf.allow_park==true)};dhtmlXWindowsCell.prototype.show=function(a){this.wins._winShow(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)};dhtmlXWindowsCell.prototype.isHidden=function(){return(this.wins.w[this._idd].conf.visible!=true)};dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,true)};dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,false)};dhtmlXWindowsCell.prototype.isSticked=function(){return(this.wins.w[this._idd].conf.sticked==true)};dhtmlXWindowsCell.prototype.setDimension=function(c,a){var b=this.wins.w[this._idd];if(b.conf.parked){this.wins._winPark(this._idd,false)}if(b.conf.maxed){if(c!=null){b.conf.lastMW=c}if(a!=null){b.conf.lastMH=a}this.wins._winMinmax(this._idd)}else{this.wins._winSetSize(this._idd,c,a,false,true)}b=null};dhtmlXWindowsCell.prototype.getDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.w,a.conf.h];a=null;return b};dhtmlXWindowsCell.prototype.setMinDimension=function(c,a){var b=this.wins.w[this._idd];b.conf.min_w=c;b.conf.min_h=a;this.wins._winSetSize(this._idd,b.conf.w,b.conf.h);b=null};dhtmlXWindowsCell.prototype.getMinDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.min_w,a.conf.min_h];a=null;return b};dhtmlXWindowsCell.prototype.setMaxDimension=function(c,a){var b=this.wins.w[this._idd];b.conf.max_w=c;b.conf.max_h=a;this.wins._winSetSize(this._idd,b.conf.w,b.conf.h);b=null};dhtmlXWindowsCell.prototype.getMaxDimension=function(){var a=this.wins.w[this._idd];var b=[a.conf.max_w,a.conf.max_h];a=null;return b};dhtmlXWindowsCell.prototype.keepInViewport=function(a){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(a)};dhtmlXWindowsCell.prototype.center=function(){var c=this.wins.vp;var b=this.wins.w[this._idd];var a=Math.round((c.clientWidth-b.conf.w)/2);var g=Math.round((c.clientHeight-b.conf.h)/2);this.wins._winSetPosition(this._idd,a,g);c=b=null};dhtmlXWindowsCell.prototype.centerOnScreen=function(){var b=this.wins.w[this._idd];var i=window.dhx4.screenDim();var h=window.dhx4.absLeft(this.wins.vp);var g=window.dhx4.absTop(this.wins.vp);var c=this.wins.vp.parentNode;while(c!=null){if(c.scrollLeft){h=h-c.scrollLeft}if(c.scrollTop){g=g-c.scrollTop}c=c.parentNode}var a=Math.round((i.right-i.left-b.conf.w)/2);var j=Math.round((i.bottom-i.top-b.conf.h)/2);this.wins._winAdjustPosition(this._idd,a-h,j-g);d=b=null};dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,true)};dhtmlXWindowsCell.prototype.bringToBottom=function(){var a=(this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active);window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id);this.wins.w[this._idd].win.style.zIndex=0;this.wins._winMakeActive(a,true)};dhtmlXWindowsCell.prototype.isOnTop=function(){return(this.wins.w[this._idd].conf.actv==true)};dhtmlXWindowsCell.prototype.isOnBottom=function(){var c={id:null,z:+Infinity};for(var b in this.wins.w){if(this.wins.w[b].conf.visible&&this.wins.w[b].win.style.zIndex<c.z){c.id=b;c.z=this.wins.w[b].win.style.zIndex}}return(c.id==this._idd)};dhtmlXWindowsCell.prototype.showHeader=function(){var a=this.wins.w[this._idd];if(a.conf.header==false){a.hdr.className=String(a.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,"");a.brd.className=String(a.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,"");this.conf.cells_cont=null;a.conf.brd=null;a.conf.header=true;this.wins._winAdjustCell(this._idd)}a=null};dhtmlXWindowsCell.prototype.hideHeader=function(){var a=this.wins.w[this._idd];if(a.conf.header==true){if(a.conf.parked){this.wins._winPark(this._idd,false)}a.hdr.className+=" dhxwin_hdr_hidden";a.brd.className+=" dhxwin_hdr_hidden";this.conf.cells_cont=null;a.conf.brd=null;a.conf.header=false;this.wins._winAdjustCell(this._idd)}a=null};dhtmlXWindowsCell.prototype.setModal=function(a){this.wins._winSetModal(this._idd,window.dhx4.s2b(a))};dhtmlXWindowsCell.prototype.isModal=function(){return(this.wins.w[this._idd].conf.modal==true)};dhtmlXWindowsCell.prototype._adjustByCont=function(a,b){a+=this.wins.w[this._idd].conf.w-this.conf.size.w;b+=this.wins.w[this._idd].conf.h-this.conf.size.h;this.wins._winSetSize(this._idd,a,b)};dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)};dhtmlXWindowsCell.prototype.setIconCss=function(a){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+a;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.setToFullScreen=function(b){b=window.dhx4.s2b(b);var a=this.wins.w[this._idd];if(a.conf.fs_mode==b){a=null;return}if(this.wins.fsn==null){this.wins.fsn=document.createElement("DIV");this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs";document.body.appendChild(this.wins.fsn)}if(b){this.wins.fsn.appendChild(a.win);this.maximize();this.hideHeader()}else{this.wins.vp.appendChild(a.win);this.minimize();this.showHeader();if(this.wins.fsn.childNodes.length==0){this.wins.fsn.parentNode.removeChild(this.wins.fsn);this.wins.fsn=null}}a.conf.fs_mode=b;a=null};dhtmlXWindowsCell.prototype.button=function(a){if(a=="minmax1"||a=="minmax2"){a="minmax"}return this.wins.w[this._idd].b[a]};dhtmlXWindowsCell.prototype.addUserButton=function(k,j,g){var a=new dhtmlXWindowsButton(this.wins,this._idd,k,g,true);var i=null;var c=this.wins.w[this._idd].hdr.lastChild;if(isNaN(j)){j=0}else{if(j<0){j=0}}if(c.childNodes[j]!=null){i=c.childNodes[j]}if(i!=null){c.insertBefore(a.button,i)}else{c.appendChild(a.button)}this.wins.w[this._idd].b[k]=a;a=i=c=null;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.removeUserButton=function(a){if(this.wins.w[this._idd].b[a]==null||this.wins.w[this._idd].b[a].conf.custom!=true){return}this.wins._winRemoveButton(this._idd,a)};window.dhtmlXWindowsButton=function(h,b,a,g,c){this.conf={wins:h,winId:b,name:a,enabled:true,visible:true,custom:true};this.button=document.createElement("DIV");this.button._buttonName=a;this.button.title=g;this.enable=function(){this.conf.enabled=true;this.setCss(this.conf.css)};this.disable=function(){this.conf.enabled=false;this.setCss(this.conf.css)};this.isEnabled=function(){return(this.conf.enabled==true)};this.show=function(){this.button.style.display="";this.conf.visible=true;this.conf.wins._winAdjustTitle(this.conf.winId)};this.hide=function(){this.button.style.display="none";this.conf.visible=false;this.conf.wins._winAdjustTitle(this.conf.winId)};this.isHidden=function(){return(this.conf.visible==false)};this.setCss=function(j){this.conf.css=j;var i=(this.conf.enabled?"":"_dis");this.button.className="dhxwin_button"+i+" dhxwin_button_"+this.conf.css+i};this._doOnClick=function(i){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])};this.unload=function(i){dhx4._eventable(this,"clear");this.button._buttonName=null;this.button.parentNode.removeChild(this.button);if(this.conf.wins.cm!=null&&this.conf.wins.cm.button[this.conf.winId]!=null&&this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)}this.button=null;this.enable=null;this.disable=null;this.isEnabled=null;this.show=null;this.hide=null;this.isHidden=null;this.setCss=null;this.unload=null;if(i!=true){this.conf.wins._winAdjustTitle(this.conf.winId)}this.conf.wins=null;this.conf.winId=null;this.conf=null};this.setCss(a);dhx4._eventable(this);return this};dhtmlXWindows.prototype._winButtonClick=function(c,a,b){if(!this.w[c].b[a].isEnabled()){return true}if(this.w[c].b[a]._doOnClick()!==true){return}if(a=="help"){this._callMainEvent("onHelp",c)}if(a=="park"){this._winPark(c,true)}if(a=="minmax"){this._winMinmax(c)}if(a=="stick"){this._winStick(c);return false}if(a=="close"){this._winClose(c);return false}return true};dhtmlXWindows.prototype._winRemoveButton=function(c,a,b){this.w[c].b[a].unload(b);this.w[c].b[a]=null;delete this.w[c].b[a]};dhtmlXWindows.prototype._dndInitModule=function(){var a=this;this.conf.dnd_tm=null;this.conf.dnd_time=0;if(window.navigator.msPointerEnabled==true){this.conf.dnd_evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{this.conf.dnd_evs={start:"touchstart",move:"touchmove",end:"touchend"}}this._dndOnMouseDown=function(g,h){if(a.conf.dblclick_active){return}if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}if(a._callMainEvent("onBeforeMoveStart",h)!==true){return}a.conf.dnd={id:h,x:a._dndPos(g,"X"),y:a._dndPos(g,"Y"),ready:true,css:false,css_touch:false,css_vp:false,tr:null,mode:"def",moved:false,prevent:false};if(a.w[h].conf.keep_in_vp){a.conf.dnd.minX=0;a.conf.dnd.maxX=a.vp.clientWidth-a.w[h].conf.w;a.conf.dnd.minY=0;a.conf.dnd.maxY=a.vp.clientHeight-a.w[h].conf.h}else{a.conf.dnd.minX=-a.w[h].conf.w+a.conf.vp_pos_ofs;a.conf.dnd.maxX=a.vp.clientWidth-a.conf.vp_pos_ofs;a.conf.dnd.minY=0;a.conf.dnd.maxY=a.vp.clientHeight-a.conf.vp_pos_ofs}var b=["MozTransform","WebkitTransform","OTransform","msTransform","transform"];for(var c=0;c<b.length;c++){if(document.documentElement.style[b[c]]!=null&&a.conf.dnd.tr==null){a.conf.dnd.tr=b[c];a.conf.dnd.mode="tr"}}if(a.conf.dnd.mode=="tr"){a.w[h].win.style[a.conf.dnd.tr]="translate(0px,0px)"}if(g.type==a.conf.dnd_evs.start){if(a.conf.dnd.css_touch==false){a.w[h].win.className+=" dhxwin_dnd_touch";a.conf.dnd.css_touch=true}if(a.conf.dnd.css_vp==false){a.vp.className+=" dhxwins_vp_dnd";a.conf.dnd.css_vp=true}}else{a._dndInitEvents()}};this._dndOnMouseMove=function(h){h=h||event;var g=a.conf.dnd;var b=a._dndPos(h,"X")-g.x;var i=a._dndPos(h,"Y")-g.y;if(h.type==a.conf.dnd_evs.move){if(g.moved!=true&&(Math.abs(b)>20||Math.abs(i)>20)){if(a.conf.dnd_tm!=null){window.clearTimeout(a.conf.dnd_tm);a.conf.dnd_tm=null}window.removeEventListener(a.conf.dnd_evs.start,a._dndOnMouseMove,false);return}}if(g.ready!=true){return}var c=a.w[g.id];if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}if(g.css!=true){if(g.css_touch==false){c.win.className+=" dhxwin_dnd"}c.fr_cover.className+=" dhxwin_fr_cover_dnd";g.css=true}if(g.css_vp!=true){a.vp.className+=" dhxwins_vp_dnd";g.css_vp=true}g.newX=c.conf.x+b;g.newY=c.conf.y+i;if(g.mode=="tr"){g.newX=Math.min(Math.max(g.newX,g.minX),g.maxX);b=g.newX-c.conf.x;g.newY=Math.min(Math.max(g.newY,g.minY),g.maxY);i=g.newY-c.conf.y;c.win.style[g.tr]="translate("+b+"px,"+i+"px)"}else{if(g.newX<g.minX||g.newX>g.maxX){g.newX=Math.min(Math.max(g.newX,g.minX),g.maxX)}else{g.x=a._dndPos(h,"X")}if(g.newY<g.minY||g.newY>g.maxY){g.newY=Math.min(Math.max(g.newY,g.minY),g.maxY)}else{g.y=a._dndPos(h,"Y")}a._winSetPosition(g.id,g.newX,g.newY)}g.moved=true;c=g=null};this._dndOnMouseUp=function(g){g=g||event;if(a.conf.dnd!=null){var c=a.conf.dnd;var b=a.w[c.id];if(c.newX!=null){if(c.mode=="tr"){a._winSetPosition(c.id,c.newX,c.newY);b.win.style[c.tr]="translate(0px,0px)"}}if(c.css==true){if(c.css_touch==false){b.win.className=String(b.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")}b.fr_cover.className=String(b.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,"")}if(c.css_touch==true){b.win.className=String(b.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,"")}if(c.css_vp==true){a.vp.className=String(a.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,"")}a._dndUnloadEvents();if(c.moved==true){a._callMainEvent("onMoveFinish",c.id)}else{a._callMainEvent("onMoveCancel",c.id)}b=c=a.conf.dnd=null}if(window.dhx4.isIE==true&&g.type==a.conf.dnd_evs.end&&window.navigator.msPointerEnabled==true){document.body.style.msTouchAction="";window.removeEventListener(a.conf.dnd_evs.end,a._dndOnMouseUp,false);window.removeEventListener(a.conf.dnd_evs.move,a._dndOnMouseMove,false);if(a.conf.dnd_tm!=null){window.clearTimeout(a.conf.dnd_tm)}a.conf.dnd_tm=null}};this._dndOnSelectStart=function(b){b=b||event;if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}return false};this._dndInitEvents=function(){if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",this._dndOnMouseMove,false);window.addEventListener("mouseup",this._dndOnMouseUp,false);window.addEventListener("selectstart",this._dndOnSelectStart,false)}else{document.body.attachEvent("onmousemove",this._dndOnMouseMove);document.body.attachEvent("onmouseup",this._dndOnMouseUp);document.body.attachEvent("onselectstart",this._dndOnSelectStart)}};this._dndUnloadEvents=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",this._dndOnMouseMove,false);window.removeEventListener("mouseup",this._dndOnMouseUp,false);window.removeEventListener("selectstart",this._dndOnSelectStart,false)}else{document.body.detachEvent("onmousemove",this._dndOnMouseMove);document.body.detachEvent("onmouseup",this._dndOnMouseUp);document.body.detachEvent("onselectstart",this._dndOnSelectStart)}};this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid);this.conf.dnd_evid=null;this._dndOnMouseDown=null;this._dndOnMouseMove=null;this._dndOnMouseUp=null;this._dndOnSelectStart=null;this._dndInitEvents=null;this._dndUnloadEvents=null;this._dndInitModule=null;this._dndUnloadModule=null;a=null};this._dndPos=function(c,b){var g=c[this.conf.dnd_ev_prefix+b];if(g==null){g=e.touches[0][this.conf.dnd_ev_prefix+b]}return g};this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(c,b){if(c.type==this.conf.dnd_evs.start){if(b.mode=="hdr"){if(this.w[b.id].conf.maxed&&this.w[b.id].conf.max_w==null&&this.w[b.id].conf.max_h==null){return}this.conf.dnd_ev_prefix="page";this.conf.dnd={x:this._dndPos(c,"X"),y:this._dndPos(c,"Y")};if(this.conf.dnd_time<1){this._dndOnMouseDown(c,b.id)}else{if(this.conf.dnd_tm!=null){window.clearTimeout(this.conf.dnd_tm)}this.conf.dnd_tm=window.setTimeout(function(){a._dndOnMouseDown(c,b.id)},this.conf.dnd_time)}if(window.dhx4.isIE==true&&window.navigator.msPointerEnabled==true){document.body.style.msTouchAction="none";window.addEventListener(this.conf.dnd_evs.end,this._dndOnMouseUp,false)}window.addEventListener(this.conf.dnd_evs.move,this._dndOnMouseMove,false)}return false}if(c.type==this.conf.dnd_evs.end){if(this.conf.dnd_tm!=null){window.clearTimeout(this.conf.dnd_tm);this.conf.dnd_tm=null}this._dndOnMouseUp();window.removeEventListener(this.conf.dnd_evs.move,this._dndOnMouseMove,false);return false}if(c.button>=2){return}this.conf.dnd_ev_prefix="client";if(!(b.mode=="hdr"&&c.type=="mousedown"&&this.w[b.id].conf.allow_move==true)){return}if(this.w[b.id].conf.maxed&&this.w[b.id].conf.max_w==null&&this.w[b.id].conf.max_h==null){return}if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}this._dndOnMouseDown(c,b.id);return false})};dhtmlXWindowsCell.prototype._initResize=function(){var a=this;var b=navigator.userAgent;this.conf.resize={b_width:6,c_type:(b.indexOf("MSIE 10.0")>0||b.indexOf("MSIE 9.0")>0||b.indexOf("MSIE 8.0")>0||b.indexOf("MSIE 7.0")>0||b.indexOf("MSIE 6.0")>0)};this._rOnCellMouseMove=function(j){if(a.wins.conf.resize_actv==true||a.wins.w[a._idd].conf.allow_resize==false||a.conf.progress==true||a.wins.w[a._idd].conf.maxed==true||a.wins.w[a._idd].conf.fs_mode==true){var h=a.wins.w[a._idd].brd;if(h.style.cursor!="default"){h.style.cursor="default"}h=null;return}j=j||event;var p=a.wins.w[a._idd].brd;var c=a.conf.resize;var m=(a.wins.w[a._idd].conf.header==false);var n=j.clientX;var l=j.clientY;var g=window.dhx4.absLeft(p);var o=window.dhx4.absTop(p);var i="";if(n<=g+c.b_width){i="w"}else{if(n>=g+p.offsetWidth-c.b_width){i="e"}}if(l>=o+p.offsetHeight-c.b_width){i="s"+i}else{if(m&&l<=o+c.b_width){i="n"+i}}if(i==""){i=false}if(c.mode!=i){c.mode=i;if(i==false){p.style.cursor="default"}else{p.style.cursor=i+"-resize"}}p=c=null};this._rOnCellMouseDown=function(i){if(a.conf.resize.mode==false){return}if(a.conf.progress==true){return}if(a.wins.w[a._idd].conf.allow_resize==false){return}if(a.wins.w[a._idd].conf.fs_mode==true){return}if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}if(a.wins._callMainEvent("onBeforeResizeStart",a._idd)!==true){return}var c=a.wins.w[a._idd];var h=a.conf.resize;a.wins.conf.resize_actv=true;h.min_w=c.conf.min_w;h.min_h=c.conf.min_h;h.max_w=c.conf.max_w||+Infinity;h.max_h=c.conf.max_h||+Infinity;if(c.cell.dataType=="layout"&&c.cell.dataObj!=null&&typeof(c.cell.dataObj._getWindowMinDimension)=="function"){var g=c.cell.dataObj._getWindowMinDimension(c.cell);h.min_w=Math.max(g.w,h.min_w);h.min_h=Math.max(g.h,h.min_h)}h.vp_l=a.wins.conf.vp_pos_ofs;h.vp_r=a.wins.vp.clientWidth-a.wins.conf.vp_pos_ofs;h.vp_b=a.wins.vp.clientHeight-a.wins.conf.vp_pos_ofs;h.x=i.clientX;h.y=i.clientY;if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",a._rOnWinMouseMove,false);window.addEventListener("mouseup",a._rOnWinMouseUp,false);window.addEventListener("selectstart",a._rOnSelectStart,false)}else{document.body.attachEvent("onmousemove",a._rOnWinMouseMove);document.body.attachEvent("onmouseup",a._rOnWinMouseUp);document.body.attachEvent("onselectstart",a._rOnSelectStart)}h.resized=false;h.vp_cursor=a.wins.vp.style.cursor;a.wins.vp.style.cursor=h.mode+"-resize";c=h=null};this._rOnWinMouseMove=function(i){i=i||event;var g=a.wins.w[a._idd];var h=a.conf.resize;if(!h.resized){g.fr_cover.className+=" dhxwin_fr_cover_resize";h.resized=true}var c=i.clientX-h.x;var j=i.clientY-h.y;if(h.mode.indexOf("e")>=0){h.rw=Math.min(Math.max(g.conf.w+c,h.min_w),h.max_w);h.rx=null;if(g.conf.x+h.rw<h.vp_l){h.rw=h.vp_l-g.conf.x}else{if(g.conf.x+h.rw>a.wins.vp.clientWidth){h.rw=a.wins.vp.clientWidth-g.conf.x}}}else{if(h.mode.indexOf("w")>=0){h.rw=Math.min(Math.max(g.conf.w-c,h.min_w),h.max_w);h.rx=g.conf.x+g.conf.w-h.rw;if(h.rx<0){h.rw=h.rw+h.rx;h.rx=0}else{if(h.rx>h.vp_r){h.rw=h.rw-h.vp_r;h.rx=h.vp_r}}}}if(h.mode.indexOf("s")>=0){h.rh=Math.min(Math.max(g.conf.h+j,h.min_h),h.max_h);h.ry=null;if(g.conf.y+h.rh>a.wins.vp.clientHeight){h.rh=a.wins.vp.clientHeight-g.conf.y}}else{if(h.mode.indexOf("n")>=0){h.rh=Math.min(Math.max(g.conf.h-j,h.min_h),h.max_h);h.ry=g.conf.y+g.conf.h-h.rh;if(h.ry<0){h.rh=h.rh+h.ry;h.ry=0}else{if(h.ry>h.vp_b){h.rh=h.rh-h.vp_b;h.ry=h.vp_b}}}}a._rAdjustSizer();g=h=null};this._rOnWinMouseUp=function(){var g=a.conf.resize;var c=a.wins.w[a._idd];a.wins.conf.resize_actv=false;a.wins.vp.style.cursor=g.vp_cursor;c.fr_cover.className=String(c.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,"");if(g.resized){a.wins._winSetSize(a._idd,g.rw,g.rh);if(g.rx==null){g.rx=c.conf.x}if(g.ry==null){g.ry=c.conf.y}if(g.rx!=c.conf.x||g.ry!=c.conf.y){a.wins._winSetPosition(a._idd,g.rx,g.ry)}}if(g.obj!=null){g.obj.parentNode.removeChild(g.obj);g.obj=null}if(g.objFR!=null){g.objFR.parentNode.removeChild(g.objFR);g.objFR=null}if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",a._rOnWinMouseMove,false);window.removeEventListener("mouseup",a._rOnWinMouseUp,false);window.removeEventListener("selectstart",a._rOnSelectStart,false)}else{document.body.detachEvent("onmousemove",a._rOnWinMouseMove);document.body.detachEvent("onmouseup",a._rOnWinMouseUp);document.body.detachEvent("onselectstart",a._rOnSelectStart)}if(g.resized==true){if(a.dataType=="layout"&&a.dataObj!=null){a.dataObj.callEvent("onResize",[])}a.wins._callMainEvent("onResizeFinish",a._idd)}else{a.wins._callMainEvent("onResizeCancel",a._idd)}g.mode="";c=g=null};this._rOnSelectStart=function(c){c=c||event;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}return false};this._rInitSizer=function(){var g=a.conf.resize;var c=a.wins.w[a._idd];g.obj=document.createElement("DIV");g.obj.className="dhxwin_resize";g.obj.style.zIndex=c.win.style.zIndex;g.obj.style.cursor=g.mode+"-resize";a.wins.vp.appendChild(g.obj);if(a.wins.conf.fr_cover==true){g.objFR=document.createElement("IFRAME");g.objFR.className="dhxwin_resize_fr_cover";g.objFR.style.zIndex=g.obj.style.zIndex;a.wins.vp.insertBefore(g.objFR,g.obj)}g.rx=c.conf.x;g.ry=c.conf.y;g.rw=c.conf.w;g.rh=c.conf.h;g=null};this._rAdjustSizer=function(){var c=a.conf.resize;if(!c.obj){this._rInitSizer()}c.obj.style.width=c.rw+"px";c.obj.style.height=c.rh+"px";if(c.rx!=null){c.obj.style.left=c.rx+"px"}if(c.ry!=null){c.obj.style.top=c.ry+"px"}if(c.objFR!=null){c.objFR.style.width=c.obj.style.width;c.objFR.style.height=c.obj.style.height;if(c.rx!=null){c.objFR.style.left=c.obj.style.left}if(c.ry!=null){c.objFR.style.top=c.obj.style.top}}c=null};if(typeof(window.addEventListener)=="function"){this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,false)}else{this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove);this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown)}this._unloadResize=function(){if(typeof(window.addEventListener)=="function"){this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,false);this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,false)}else{this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove);this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown)}this._initResize=null;this._rOnCellMouseMove=null;this._rOnCellMouseDown=null;this._rOnWinMouseMove=null;this._rOnWinMouseUp=null;this._rOnSelectStart=null;this._rInitSizer=null;this._rAdjustSizer=null;this._unloadResize=null;this.conf.resize=null;a=null}};dhtmlXWindows.prototype.attachContextMenu=function(a){return this._renderContextMenu("icon",null,null,a)};dhtmlXWindows.prototype.getContextMenu=function(){if(this.cm!=null&&this.cm.global!=null){return this.cm.global}return null};dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)};dhtmlXWindowsCell.prototype.attachContextMenu=function(a){return this.wins._renderContextMenu("icon",this._idd,null,a)};dhtmlXWindowsCell.prototype.getContextMenu=function(){if(this.wins.cm!=null&&this.wins.cm.icon[this._idd]!=null){return this.wins.cm.icon[this._idd]}return null};dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)};dhtmlXWindowsButton.prototype.attachContextMenu=function(a){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,a)};dhtmlXWindowsButton.prototype.getContextMenu=function(){if(this.conf.wins.cm==null||this.conf.wins.cm.button[this.conf.winId]==null){return null}if(this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null){return this.conf.wins.cm.button[this.conf.winId][this.conf.name]}return null};dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)};dhtmlXWindows.prototype._renderContextMenu=function(j,i,c,b){var g=this;var a=false;if(this.cm==null){this.cm={global:null,icon:{},button:{}};a=true}if(i==null){if(this.cm.global!=null){return}}else{if(j=="icon"){if(this.cm.icon[i]!=null){return}}else{if(j=="button"){if(this.cm.button[i]!=null&&this.cm.button[i][c]!=null){return}}}}if(b==null){b={}}b.parent=null;b.context=true;var h=new dhtmlXMenuObject(b);h.setAutoHideMode(false);h.attachEvent("onShow",function(){this.conf.wins_menu_open=true});h.attachEvent("onHide",function(){this.conf.wins_menu_open=false;g.conf.opened_menu=null});if(i==null){this.cm.global=h}else{if(j=="icon"){this.cm.icon[i]=h}else{if(j=="button"){if(this.cm.button[i]==null){this.cm.button[i]={}}this.cm.button[i][c]=h}}}if(a){this._showContextMenu=function(n,m){if(n.button>=2){return}if(m.mode=="icon"&&m.id!=null&&m.press_type=="mousedown"){var o=this.cm.icon[m.id]||this.cm.global;if(o==null){return}n.cancelBubble=true;var l=this.w[m.id].hdr.firstChild;if(o.conf.wins_menu_open&&this.conf.opened_menu==m.id){o.hideContextMenu()}else{this._hideContextMenu();o.showContextMenu(window.dhx4.absLeft(l),window.dhx4.absTop(l)+l.offsetHeight);this.conf.opened_menu=m.id}o=l=null}if(m.mode=="button"&&m.id!=null&&m.press_type=="mousedown"){if(this.cm.button[m.id]==null||this.cm.button[m.id][m.button_name]==null){return}n.cancelBubble=true;this.conf.button_last=null;var o=this.cm.button[m.id][m.button_name];var k=this.w[m.id].b[m.button_name].button;if(o.conf.wins_menu_open&&this.conf.opened_menu==m.id){o.hideContextMenu()}else{this._hideContextMenu();o.showContextMenu(window.dhx4.absLeft(k),window.dhx4.absTop(k)+k.offsetHeight);this.conf.opened_menu=m.id}o=k=null}};this._hideContextMenu=function(p){if(p!=null){p=p||event;if(p.type=="keydown"&&p.keyCode!=27){return}var o=p.target||p.srcElement;var l=true;while(o!=null&&l==true){if(o.className!=null&&o.className.search(/SubLevelArea_Polygon/)>=0){l=false}else{o=o.parentNode}}}if(l||p==null){if(g.cm.global!=null){g.cm.global.hideContextMenu()}for(var n in g.cm.icon){if(g.cm.icon[n]!=null){g.cm.icon[n].hideContextMenu()}}for(var n in g.cm.button){for(var k in g.cm.button[n]){if(g.cm.button[n][k]!=null){g.cm.button[n][k].hideContextMenu()}}}}};this._detachContextMenu=function(m,l,k){if(this.cm==null){return}if(l==null){if(this.cm.global!=null){this.cm.global.unload();this.cm.global=null}}else{if(m=="icon"){if(this.cm.icon[l]!=null){this.cm.icon[l].unload();this.cm.icon[l]=null}}else{if(m=="button"){if(this.cm.button[l]!=null&&this.cm.button[l][k]!=null){this.cm.button[l][k].unload();this.cm.button[l][k]=null}}}}};this.attachEvent("_winMouseDown",this._showContextMenu);if(typeof(window.addEventListener)=="function"){window.addEventListener("mousedown",this._hideContextMenu,false);window.addEventListener("keydown",this._hideContextMenu,false)}else{document.body.attachEvent("onmousedown",this._hideContextMenu);document.body.attachEvent("onkeydown",this._hideContextMenu)}this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null);this.cm=null;if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._hideContextMenu,false);window.removeEventListener("keydown",this._hideContextMenu,false)}else{document.body.detachEvent("onmousedown",this._hideContextMenu);document.body.detachEvent("onkeydown",this._hideContextMenu)}g=null}}return h};